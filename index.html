<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8">
    <title>VR Quiz App</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Carregar a imagem panorâmica -->
      <a-sky src="carata.jpg" rotation="0 -130 0"></a-sky>

      <!-- Pergunta -->
      <a-text id="pergunta" 
              value="Caratateua fica em que Estado?" 
              position="0 2 -3" 
              width="4"
              color="red">
      </a-text>

      <!-- Opções de Resposta com espaçamento ajustado -->
      <a-text value="A) Manaus" 
              position="-2.5 1.5 -3" 
              width="4" 
              color="white"
              class="option"
              id="opcaoA">
      </a-text>

      <a-text value="B) Maranhão" 
              position="2.5 1.5 -3" 
              width="4" 
              color="white"
              class="option"
              id="opcaoB">
      </a-text>

      <a-text value="C) Pará" 
              position="-2.5 1 -3" 
              width="4" 
              color="white"
              class="option"
              id="opcaoC">
      </a-text>

      <a-text value="D) Roraima" 
              position="2.5 1 -3" 
              width="4" 
              color="white"
              class="option"
              id="opcaoD">
      </a-text>

      <!-- Cursor para seleção -->
      <a-entity camera look-controls>
        <a-cursor 
          color="yellow"
          fuse="true" 
          fuse-timeout="1000">
        </a-cursor>
      </a-entity>
    </a-scene>

    <script>
      // Array de perguntas e respostas
      const perguntas = [
        {
          pergunta: "Caratateua fica em que Estado?",
          opcoes: ["Manaus", "Maranhão", "Pará", "Roraima"],
          correta: 2
        },
        {
          pergunta: "Quantos anos duram, em média, as placas solares mantendo boa eficiência?",
          opcoes: ["10 anos", "15 anos", "20 anos", "25 anos"],
          correta: 2
        },
        {
          pergunta: "Como funciona a energia termosolar ou heliotérmica?",
          opcoes: [
            "Transforma o calor do sol em eletricidade diretamente",
            "Usa a luz solar para gerar energia química",
            "Transforma a luz do sol em calor e, posteriormente, em energia elétrica",
            "Gera energia a partir de espelhos"
          ],
          correta: 2
        }
      ];

      let perguntaAtual = 0;

      function atualizarPergunta() {
        const pergunta = perguntas[perguntaAtual];
        document.getElementById("pergunta").setAttribute("value", pergunta.pergunta);
        document.getElementById("opcaoA").setAttribute("value", `A) ${pergunta.opcoes[0]}`);
        document.getElementById("opcaoB").setAttribute("value", `B) ${pergunta.opcoes[1]}`);
        document.getElementById("opcaoC").setAttribute("value", `C) ${pergunta.opcoes[2]}`);
        document.getElementById("opcaoD").setAttribute("value", `D) ${pergunta.opcoes[3]}`);
        document.getElementById("opcaoA").setAttribute("color", "white");
        document.getElementById("opcaoB").setAttribute("color", "white");
        document.getElementById("opcaoC").setAttribute("color", "white");
        document.getElementById("opcaoD").setAttribute("color", "white");
      }

      function verificarResposta(opcaoIndex) {
        const respostaCorreta = perguntas[perguntaAtual].correta;
        const idCorreta = ["opcaoA", "opcaoB", "opcaoC", "opcaoD"][respostaCorreta];
        document.getElementById(idCorreta).setAttribute("color", "blue");

        if (opcaoIndex === respostaCorreta) {
          tocarSom("success.mp3");
        }

        setTimeout(() => {
          perguntaAtual++;
          if (perguntaAtual < perguntas.length) {
            atualizarPergunta();
          } else {
            document.getElementById("pergunta").setAttribute("value", "Você completou todas as perguntas!");
            tocarSom("aprendeu.mp3");
          }
        }, 2000);
      }

      // Eventos de clique nas opções
      const opcoes = ["opcaoA", "opcaoB", "opcaoC", "opcaoD"];
      opcoes.forEach((id, index) => {
        const opcaoEl = document.getElementById(id);

        // Evento de clique
        opcaoEl.addEventListener("click", () => {
          verificarResposta(index);
        });

        // Evento para aumentar o tamanho ao focar com o cursor
        opcaoEl.addEventListener("mouseenter", () => {
          opcaoEl.setAttribute("scale", "1.2 1.2 1");
        });
        opcaoEl.addEventListener("mouseleave", () => {
          opcaoEl.setAttribute("scale", "1 1 1");
        });
      });

      atualizarPergunta();
    </script>
  </body>
</html>
